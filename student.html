<script>
const API = "https://zerotoin-backend.onrender.com";

async function loadVideos(){
    const res = await fetch(API + "/api/videos");
    const data = await res.json();

    const box = document.getElementById("videos");
    box.innerHTML = "";

    if(data.length === 0){
        box.innerHTML = "<p>No videos uploaded yet.</p>";
        return;
    }

    data.forEach(v => {

        if(v.url.includes("youtube.com") || v.url.includes("youtu.be")){
            const embed = v.url.replace("watch?v=","embed/");

            box.innerHTML += `
                <div class="video-card">
                    <h3>${v.title}</h3>
                    <iframe src="${embed}" allowfullscreen></iframe>
                </div>
            `;
        }
        else{
            box.innerHTML += `
                <div class="video-card">
                    <h3>${v.title}</h3>
                    <video controls>
                        <source src="${v.url}">
                    </video>
                </div>
            `;
        }

    });
}

function logout(){
    location="login.html";
}

loadVideos();
</script>
